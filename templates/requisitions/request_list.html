{% extends 'base.html' %}
{% block content %}
<style>
  .request-hero {
    background: linear-gradient(120deg, rgba(193, 18, 31, 0.06), rgba(242, 140, 40, 0.08));
    border: 1px solid rgba(0,0,0,0.04);
    border-radius: 16px;
    padding: 14px 16px;
    margin-bottom: 16px;
    box-shadow: 0 10px 28px rgba(0,0,0,0.04);
  }
  .request-hero h2 { margin: 0 0 4px 0; }
  .request-hero p { margin: 0; color: #6c757d; }
  .board-card { border-radius: 14px; overflow: hidden; }
  .board-card .card-header { border: none; font-weight: 800; }
  .card-status-pending .card-header { background: linear-gradient(90deg, rgba(244, 180, 0, 0.14), rgba(242, 140, 40, 0.08)); }
  .card-status-approved .card-header { background: linear-gradient(90deg, rgba(25, 135, 84, 0.16), rgba(25, 135, 84, 0.08)); color: #0f5132; }
  .card-status-rejected .card-header { background: linear-gradient(90deg, rgba(193, 18, 31, 0.16), rgba(193, 18, 31, 0.08)); color: #7a0b13; }
  .table th { white-space: nowrap; }
  .table td { vertical-align: middle; }
</style>

<div class="request-hero">
  <h2 class="mb-1">Supply Request Management</h2>
  <p>Track your requests and show receipts to the Supply Manager for approved items.</p>
</div>

<div class="card shadow-sm mb-4 board-card">
  <div class="card-header card-header-strong fw-bold">All Requests</div>
  <div class="card-body p-0">
    {% include 'requisitions/partials/request_table.html' with requests=all_requests empty_msg='No requests yet.' show_status=True %}
  </div>
</div>

{% if user.is_staff %}
<div class="alert alert-info">Grouped by status so you can review pending items quickly.</div>
{% endif %}

<div class="row g-3">
  <div class="col-lg-4">
    <div class="card shadow-sm h-100 card-status-pending board-card">
      <div class="card-header fw-bold">Not Yet Approved</div>
      <div class="card-body p-0">
        {% include 'requisitions/partials/request_table.html' with requests=pending_requests empty_msg='No pending requests.' show_status=False %}
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card shadow-sm h-100 card-status-approved board-card">
      <div class="card-header fw-bold">Approved</div>
      <div class="card-body p-0">
        {% include 'requisitions/partials/request_table.html' with requests=approved_requests empty_msg='No approved requests.' show_status=False %}
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card shadow-sm h-100 card-status-rejected board-card">
      <div class="card-header fw-bold">Denied</div>
      <div class="card-body p-0">
        {% include 'requisitions/partials/request_table.html' with requests=rejected_requests empty_msg='No denied requests.' show_status=False %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
